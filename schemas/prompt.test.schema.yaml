# Prompt Test file schema (YAML-encoded JSON Schema)
# --------------------------------------------------
# This schema validates *.test.yaml files.

$id: https://github.com/juliusbrussee/the-prompt-library/raw/main/prompt.test.schema.yaml
$schema: http://json-schema.org/draft-07/schema#

title: Prompt Test
comment: >
  Each test file defines a set of tests for a single prompt.

type: object
required:
  - prompt_path
  - test_cases
properties:
  prompt_path:
    type: string
    description: The relative path to the prompt file being tested (e.g., 'coding-software-development/unit-test-generator.prompt.yaml').
  test_cases:
    type: array
    minItems: 1
    description: A list of test cases to run against the prompt.
    items:
      type: object
      required:
        - name
        - inputs
        - assertions
      properties:
        name:
          type: string
          description: A descriptive name for the test case.
        inputs:
          type: object
          description: A mapping of placeholder names to their test values.
          additionalProperties:
            type: string
        assertions:
          type: array
          minItems: 1
          description: A list of checks to perform on the model's output.
          items:
            type: object
            required:
              - type
              - value
            properties:
              type:
                type: string
                enum: [contains, not_contains, regex_matches]
                description: The type of assertion to perform.
              value:
                type: string
                description: The value to use for the assertion (e.g., a specific string, a regex pattern).
